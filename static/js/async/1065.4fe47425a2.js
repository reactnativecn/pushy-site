"use strict";(self.rspackChunkpushy_site=self.rspackChunkpushy_site||[]).push([["1065"],{9216(e,s,n){n.r(s),n.d(s,{default:()=>a});var r=n(2615),i=n(416),l=n(7425);function o(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"api-token",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#api-token",children:"#"}),"API Token"]}),"\n",(0,r.jsxs)(s.p,{children:["API Token 是一种用于在 CI/CD 流程或自动化脚本中调用 ",(0,r.jsx)(s.a,{href:"https://update.reactnative.cn/api/openapi",rel:"noopener noreferrer",target:"_blank",children:"Pushy API"})," 的认证方式。相比直接使用账号密码，API Token 更加安全且便于管理。"]}),"\n",(0,r.jsxs)(s.h2,{id:"使用场景",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#使用场景",children:"#"}),"使用场景"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"持续集成/持续部署 (CI/CD)"}),"：在 GitHub Actions、GitLab CI、Jenkins 等平台中自动发布热更新"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"自动化脚本"}),"：编写脚本批量管理应用、版本或原生包"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"第三方工具集成"}),"：将 Pushy 与其他开发工具集成"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"创建-api-token",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#创建-api-token",children:"#"}),"创建 API Token"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["登录 ",(0,r.jsx)(s.a,{href:"https://pushy-admin.reactnative.cn",rel:"noopener noreferrer",target:"_blank",children:"Pushy 管理后台"})]}),"\n",(0,r.jsx)(s.li,{children:"在左侧菜单中点击「API Token」"}),"\n",(0,r.jsx)(s.li,{children:"点击「创建 Token」按钮"}),"\n",(0,r.jsx)(s.li,{children:"填写 Token 名称（如：CI/CD Pipeline）"}),"\n",(0,r.jsx)(s.li,{children:"选择所需权限"}),"\n",(0,r.jsx)(s.li,{children:"可选设置过期时间"}),"\n",(0,r.jsxs)(s.li,{children:["点击创建后，",(0,r.jsx)(s.strong,{children:"立即复制并安全保存 Token"})]}),"\n"]}),"\n",(0,r.jsx)(l.Pq,{type:"warning",title:"Warning",children:(0,r.jsx)(s.p,{children:"\nToken 只会在创建时显示一次，之后无法再次查看。请务必在创建后立即复制保存！"})}),"\n",(0,r.jsxs)(s.h2,{id:"权限说明",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#权限说明",children:"#"}),"权限说明"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"权限"}),(0,r.jsx)(s.th,{children:"说明"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"读取 (read)"})}),(0,r.jsx)(s.td,{children:"查看应用、版本、原生包信息"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"写入 (write)"})}),(0,r.jsx)(s.td,{children:"创建和更新应用、发布版本、上传原生包"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"删除 (delete)"})}),(0,r.jsx)(s.td,{children:"删除应用、版本、原生包"})]})]})]}),"\n",(0,r.jsx)(l.Pq,{type:"info",title:"Info",children:(0,r.jsx)(s.p,{children:"\n创建 Token 时至少需要选择一个权限。根据实际需求选择最小必要权限是最佳实践。"})}),"\n",(0,r.jsxs)(s.h2,{id:"使用-token-调用-api",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#使用-token-调用-api",children:"#"}),"使用 Token 调用 API"]}),"\n",(0,r.jsx)(s.p,{children:"在调用 Pushy API 时，将 Token 添加到请求头中："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"bash",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" -X"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" GET"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "https://update.reactnative.cn/api/app/list"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"  -H"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "x-api-token: YOUR_API_TOKEN"'})]})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"在命令行工具中使用",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#在命令行工具中使用",children:"#"}),"在命令行工具中使用"]}),"\n",(0,r.jsxs)(s.p,{children:["如果使用 ",(0,r.jsx)(s.code,{children:"react-native-update-cli"})," 命令行工具（需 v2.7.0+），可以通过环境变量设置 Token："]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"bash",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" PUSHY_API_TOKEN"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"your_api_token_here"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"pushy"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" bundle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" --platform"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" android"})]})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"在-cicd-中使用",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#在-cicd-中使用",children:"#"}),"在 CI/CD 中使用"]}),"\n",(0,r.jsx)(s.p,{children:"以 GitHub Actions 为例："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"yaml",children:(0,r.jsxs)(s.code,{children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# .github/workflows/publish.yml"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" Publish Hot Update"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"on"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  push"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    branches"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"jobs"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  publish"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    runs-on"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" ubuntu-latest"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    steps"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      - "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"uses"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" actions/checkout@v4"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      "})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      - "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" Setup Node.js"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        uses"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" actions/setup-node@v4"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        with"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"          node-version"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '18'"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          "})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      - "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" Install dependencies"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        run"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" npm install && npm i -g react-native-update-cli"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        "})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      - "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" Publish update"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        env"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"          PUSHY_API_TOKEN"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" ${{ secrets.PUSHY_API_TOKEN }}"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        run"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" pushy bundle --platform android"})]})]})})}),"\n",(0,r.jsx)(l.Pq,{type:"tip",title:"Tip",children:(0,r.jsx)(s.p,{children:"\n在 CI/CD 环境中，建议将 Token 存储在密钥管理中（如 GitHub Secrets），而不是直接写入代码。"})}),"\n",(0,r.jsxs)(s.h2,{id:"管理-token",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#管理-token",children:"#"}),"管理 Token"]}),"\n",(0,r.jsxs)(s.h3,{id:"查看-token-列表",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#查看-token-列表",children:"#"}),"查看 Token 列表"]}),"\n",(0,r.jsx)(s.p,{children:"在「API Token」页面可以看到所有已创建的 Token，包括："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Token 名称"}),"\n",(0,r.jsx)(s.li,{children:"权限"}),"\n",(0,r.jsx)(s.li,{children:"过期时间"}),"\n",(0,r.jsx)(s.li,{children:"最后使用时间"}),"\n",(0,r.jsx)(s.li,{children:"状态（正常/已过期/已撤销）"}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"撤销-token",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#撤销-token",children:"#"}),"撤销 Token"]}),"\n",(0,r.jsx)(s.p,{children:"如果 Token 泄露或不再需要，可以随时撤销："}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"在 Token 列表中找到目标 Token"}),"\n",(0,r.jsx)(s.li,{children:"点击「撤销」按钮"}),"\n",(0,r.jsx)(s.li,{children:"确认撤销"}),"\n"]}),"\n",(0,r.jsx)(l.Pq,{type:"warning",title:"Warning",children:(0,r.jsx)(s.p,{children:"\nToken 撤销后立即生效，使用该 Token 的所有请求将被拒绝。请确保在撤销前更新相关的 CI/CD 配置。"})}),"\n",(0,r.jsxs)(s.h2,{id:"安全建议",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#安全建议",children:"#"}),"安全建议"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"最小权限原则"}),"：只授予 Token 必要的权限"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"设置过期时间"}),"：为临时使用的 Token 设置合理的过期时间"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"定期轮换"}),"：定期撤销旧 Token 并创建新 Token"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"安全存储"}),"：不要将 Token 提交到代码仓库，使用环境变量或密钥管理工具"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"监控使用"}),"：定期检查 Token 的最后使用时间，及时清理不再使用的 Token"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"限制",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#限制",children:"#"}),"限制"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["每个用户最多可创建 ",(0,r.jsx)(s.strong,{children:"10 个"})," API Token"]}),"\n",(0,r.jsx)(s.li,{children:"如需创建更多，请先撤销不再使用的 Token"}),"\n"]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["docs%2Fapi-token.mdx"]={toc:[{id:"使用场景",text:"使用场景",depth:2},{id:"创建-api-token",text:"创建 API Token",depth:2},{id:"权限说明",text:"权限说明",depth:2},{id:"使用-token-调用-api",text:"使用 Token 调用 API",depth:2},{id:"在命令行工具中使用",text:"在命令行工具中使用",depth:3},{id:"在-cicd-中使用",text:"在 CI/CD 中使用",depth:3},{id:"管理-token",text:"管理 Token",depth:2},{id:"查看-token-列表",text:"查看 Token 列表",depth:3},{id:"撤销-token",text:"撤销 Token",depth:3},{id:"安全建议",text:"安全建议",depth:2},{id:"限制",text:"限制",depth:2}],title:"API Token",headingTitle:"API Token",frontmatter:{order:12,title:"API Token",type:"开发指南"}}}}]);