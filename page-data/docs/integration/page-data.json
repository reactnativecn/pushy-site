{"componentChunkName":"component---src-templates-docs-tsx","path":"/docs/integration","result":{"data":{"markdownRemark":{"html":"<p>安装配置完成后，确定应用编译顺利通过，下面我们来进行代码集成。</p>\n<h2 id=\"获取appkey\" style=\"position:relative;\"><a href=\"#%E8%8E%B7%E5%8F%96appkey\" aria-label=\"获取appkey permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>获取appKey</h2>\n<p>检查更新时必须提供你的<code>appKey</code>，这个值保存在<code>update.json</code>中，并且根据平台不同而不同。你可以用如下的代码获取：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  Platform<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> _updateConfig <span class=\"token keyword\">from</span> <span class=\"token string\">'./update.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>appKey<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> _updateConfig<span class=\"token punctuation\">[</span>Platform<span class=\"token punctuation\">.</span><span class=\"token constant\">OS</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>如果你不使用pushy命令行，你也可以从网页端查看到两个应用appKey，并根据平台的不同来选择。</p>\n<h2 id=\"检查更新、下载更新\" style=\"position:relative;\"><a href=\"#%E6%A3%80%E6%9F%A5%E6%9B%B4%E6%96%B0%E3%80%81%E4%B8%8B%E8%BD%BD%E6%9B%B4%E6%96%B0\" aria-label=\"检查更新、下载更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>检查更新、下载更新</h2>\n<p>异步函数checkUpdate可以检查当前版本是否需要更新：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> info <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">checkUpdate</span><span class=\"token punctuation\">(</span>appKey<span class=\"token punctuation\">)</span></code></pre></div>\n<p>返回的info有三种情况：</p>\n<ol>\n<li><code>{expired: true}</code>：该应用原生包已过期（已从pushy服务器中删除），开发者应该在pushy控制台添加一个更新下载链接，并自行提示用户下载。</li>\n<li><code>{upToDate: true}</code>：当前已经更新到最新，无需进行更新。</li>\n<li><code>{update: true}</code>：当前有新版本可以更新。info的<code>name</code>、<code>description</code>字段可\n以用于提示用户，而<code>metaInfo</code>字段则可以根据你的需求自定义其它属性(如是否静默更新、\n是否强制更新等等)。另外还有几个字段，包含了完整更新包或补丁包的下载地址，\nreact-native-update会首先尝试耗费流量更少的更新方式。将info对象传递给downloadUpdate作为参数即可。</li>\n</ol>\n<h2 id=\"切换版本\" style=\"position:relative;\"><a href=\"#%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC\" aria-label=\"切换版本 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>切换版本</h2>\n<p>downloadUpdate的返回值是一个hash字符串，它是当前热更新版本的唯一标识。</p>\n<p>你可以使用<code>switchVersion</code>函数立即切换版本(此时应用会立即重新加载)，或者选择调用\n<code>switchVersionLater</code>，让应用在下一次启动的时候再加载新的版本。</p>\n<h2 id=\"首次启动、回滚\" style=\"position:relative;\"><a href=\"#%E9%A6%96%E6%AC%A1%E5%90%AF%E5%8A%A8%E3%80%81%E5%9B%9E%E6%BB%9A\" aria-label=\"首次启动、回滚 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>首次启动、回滚</h2>\n<p>在每次更新完毕后的首次启动时，<code>isFirstTime</code>常量会为<code>true</code>。\n你必须在应用退出前合适的任何时机，调用<code>markSuccess</code>，否则应用下一次启动的时候将会进行回滚操作。\n这一机制称作“反触发”，这样当你应用启动初期即遭遇问题的时候，也能在下一次启动时恢复运作。</p>\n<p>你可以通过<code>isFirstTime</code>来获知这是当前版本的首次启动，也可以通过<code>isRolledBack</code>来获知应用刚刚经历了一次回滚操作。\n你可以在此时给予用户合理的提示。</p>\n<h2 id=\"完整的示例\" style=\"position:relative;\"><a href=\"#%E5%AE%8C%E6%95%B4%E7%9A%84%E7%A4%BA%E4%BE%8B\" aria-label=\"完整的示例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>完整的示例</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  Component<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  StyleSheet<span class=\"token punctuation\">,</span>\n  Platform<span class=\"token punctuation\">,</span>\n  Text<span class=\"token punctuation\">,</span>\n  View<span class=\"token punctuation\">,</span>\n  Alert<span class=\"token punctuation\">,</span>\n  TouchableOpacity<span class=\"token punctuation\">,</span>\n  Linking<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  isFirstTime<span class=\"token punctuation\">,</span>\n  isRolledBack<span class=\"token punctuation\">,</span>\n  packageVersion<span class=\"token punctuation\">,</span>\n  currentVersion<span class=\"token punctuation\">,</span>\n  checkUpdate<span class=\"token punctuation\">,</span>\n  downloadUpdate<span class=\"token punctuation\">,</span>\n  switchVersion<span class=\"token punctuation\">,</span>\n  switchVersionLater<span class=\"token punctuation\">,</span>\n  markSuccess<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native-update'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> _updateConfig <span class=\"token keyword\">from</span> <span class=\"token string\">'./update.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>appKey<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> _updateConfig<span class=\"token punctuation\">[</span>Platform<span class=\"token punctuation\">.</span><span class=\"token constant\">OS</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyProject</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFirstTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'这是当前版本第一次启动,是否要模拟启动失败?失败将回滚到上一版本'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'是'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">onPress</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'模拟启动失败,请重启应用'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'否'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">onPress</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token function\">markSuccess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isRolledBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'刚刚更新失败了,版本被回滚.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">doUpdate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">downloadUpdate</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'下载完毕,是否重启应用?'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'是'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">onPress</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token function\">switchVersion</span><span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'否'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'下次启动时'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">onPress</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token function\">switchVersionLater</span><span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'更新失败.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">checkUpdate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>__DEV__<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 开发模式不支持热更新，跳过检查</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">let</span> info<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      info <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">checkUpdate</span><span class=\"token punctuation\">(</span>appKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">.</span>expired<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'您的应用版本已更新,请前往应用商店下载新的版本'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'确定'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">onPress</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>info<span class=\"token punctuation\">.</span>downloadUrl <span class=\"token operator\">&amp;&amp;</span> Linking<span class=\"token punctuation\">.</span><span class=\"token function\">openURL</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">.</span>downloadUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">.</span>upToDate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'您的应用版本已是最新.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      Alert<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'检查到新的版本'</span><span class=\"token operator\">+</span>info<span class=\"token punctuation\">.</span>name<span class=\"token operator\">+</span><span class=\"token string\">',是否下载?\\n'</span><span class=\"token operator\">+</span> info<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'是'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">onPress</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">doUpdate</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">'否'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>View style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Text style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>welcome<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          欢迎使用热更新服务\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Text style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>instructions<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          这是版本一 <span class=\"token punctuation\">{</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">}</span>\n          当前原生包版本号<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>packageVersion<span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">}</span>\n          当前热更新版本Hash<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>currentVersion<span class=\"token operator\">||</span><span class=\"token string\">'(空)'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>TouchableOpacity onPress<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>checkUpdate<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Text style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>instructions<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            点击这里检查更新\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TouchableOpacity<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>View<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> StyleSheet<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    flex<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    justifyContent<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    alignItems<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    backgroundColor<span class=\"token operator\">:</span> <span class=\"token string\">'#F5FCFF'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  welcome<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    fontSize<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n    textAlign<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    margin<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  instructions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    textAlign<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    color<span class=\"token operator\">:</span> <span class=\"token string\">'#333333'</span><span class=\"token punctuation\">,</span>\n    marginBottom<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>现在，你的应用已经可以通过update服务检查版本并进行更新了。下一步，你可以开始尝试发布应用包和版本，请参阅<a href=\"publish\">发布热更新</a>。</p>","tableOfContents":"<ul>\n<li><a href=\"/docs/integration/#%E8%8E%B7%E5%8F%96appkey\">获取appKey</a></li>\n<li><a href=\"/docs/integration/#%E6%A3%80%E6%9F%A5%E6%9B%B4%E6%96%B0%E3%80%81%E4%B8%8B%E8%BD%BD%E6%9B%B4%E6%96%B0\">检查更新、下载更新</a></li>\n<li><a href=\"/docs/integration/#%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC\">切换版本</a></li>\n<li><a href=\"/docs/integration/#%E9%A6%96%E6%AC%A1%E5%90%AF%E5%8A%A8%E3%80%81%E5%9B%9E%E6%BB%9A\">首次启动、回滚</a></li>\n<li><a href=\"/docs/integration/#%E5%AE%8C%E6%95%B4%E7%9A%84%E7%A4%BA%E4%BE%8B\">完整的示例</a></li>\n</ul>","frontmatter":{"title":"代码集成","order":1,"type":"快速入门"},"fields":{"path":"/docs/integration.md","slug":"/docs/integration","modifiedTime":1589249941428}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"常见问题","order":23,"type":"其他"},"fields":{"slug":"/docs/faq","path":"/docs/faq.md"}}},{"node":{"frontmatter":{"title":"更新日志","order":22,"type":"其他"},"fields":{"slug":"/docs/changelog","path":"/docs/changelog.md"}}},{"node":{"frontmatter":{"title":"场景实践","order":13,"type":"开发指南"},"fields":{"slug":"/docs/bestpractice","path":"/docs/bestpractice.md"}}},{"node":{"frontmatter":{"title":"命令行工具","order":12,"type":"开发指南"},"fields":{"slug":"/docs/cli","path":"/docs/cli.md"}}},{"node":{"frontmatter":{"title":"API参考","order":11,"type":"开发指南"},"fields":{"slug":"/docs/api","path":"/docs/api.md"}}},{"node":{"frontmatter":{"title":"工作流程","order":10,"type":"开发指南"},"fields":{"slug":"/docs/workflow","path":"/docs/workflow.md"}}},{"node":{"frontmatter":{"title":"发布热更新","order":2,"type":"快速入门"},"fields":{"slug":"/docs/publish","path":"/docs/publish.md"}}},{"node":{"frontmatter":{"title":"代码集成","order":1,"type":"快速入门"},"fields":{"slug":"/docs/integration","path":"/docs/integration.md"}}},{"node":{"frontmatter":{"title":"安装配置","order":0,"type":"快速入门"},"fields":{"slug":"/docs/getting-started","path":"/docs/getting-started.md"}}}]}},"pageContext":{"slug":"/docs/integration","type":"/docs/"}}}