<!doctype html>
<html lang="en">
  <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>安装配置 - Pushy 极速热更新</title>
<link href="/static/css/styles.5863677add.css" rel="stylesheet">
<script defer src="/static/js/styles.b870503bf3.js"></script>
<script defer src="/static/js/lib-react.95becf39cf.js"></script>
<script defer src="/static/js/lib-router.cb3c8eabdf.js"></script>
<script defer src="/static/js/613.fc4a75836e.js"></script>
<script defer src="/static/js/index.0a41274001.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Rspress v2.0.3">
<meta property="og:keywords" content="热更新,hotupdate,免审核,快速上架">
<link rel="icon" href="/logo.svg" type="image/svg+xml">
<meta property="og:type" content="website">
<meta property="og:title" content="安装配置 - Pushy 极速热更新">
<meta name="description" content="Pushy 极速热更新">
<meta property="og:description" content="Pushy 极速热更新"></head>

  <body>
    <div id="__rspress_root"><link rel="preload" as="image" href="/images/logo.svg"/><link rel="preload" as="image" href="/static/image/deeplinkqrcode.e4a16cb983.jpg"/><header class="rp-nav"><div class="rp-nav__left"><div class="rp-nav__title"><a href="/" class="rp-nav__title__link rp-link"><div class="rp-nav__title__logo"><img src="/images/logo.svg" alt="logo" id="logo" class="rspress-logo rp-nav__title__logo-image rp-nav__title__logo-image--light"/><img src="/images/logo.svg" alt="logo" id="logo" class="rspress-logo rp-nav__title__logo-image rp-nav__title__logo-image--dark"/></div><span>Pushy 极速热更新</span></a></div></div><div class="rp-nav__right"><button class="rp-search-button"><div class="rp-search-button__content"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 20 21" class="rp-search-button__icon"><path fill="currentColor" d="M8.333 1.913A6.667 6.667 0 0 1 15 8.58c0 1.54-.525 2.957-1.402 4.085l4.49 4.492a.834.834 0 0 1-1.177 1.178l-4.491-4.49a6.64 6.64 0 0 1-4.087 1.402 6.667 6.667 0 0 1 0-13.334m0 1.667a5 5 0 1 0 0 10 5 5 0 0 0 0-10"></path></svg><span class="rp-search-button__word">Search</span></div><div class="rp-search-button__hotkey" style="opacity:0"><span></span><span>K</span></div></button><div class="rp-search-button--mobile"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 20 21"><path fill="currentColor" d="M8.333 1.913A6.667 6.667 0 0 1 15 8.58c0 1.54-.525 2.957-1.402 4.085l4.49 4.492a.834.834 0 0 1-1.177 1.178l-4.491-4.49a6.64 6.64 0 0 1-4.087 1.402 6.667 6.667 0 0 1 0-13.334m0 1.667a5 5 0 1 0 0 10 5 5 0 0 0 0-10"></path></svg></div><ul class="rp-nav-menu rp-nav-menu--right"><li class="rp-nav-menu__item rp-nav-menu__item--active"><a href="/index.html" class="rp-nav-menu__item__container rp-link">首页</a></li><li class="rp-nav-menu__item rp-nav-menu__item--active"><a href="/docs/intro.html" class="rp-nav-menu__item__container rp-link">文档</a></li><li class="rp-nav-menu__item"><a href="/pricing.html" class="rp-nav-menu__item__container rp-link">价格</a></li><li class="rp-nav-menu__item"><a href="/docs/faq.html" class="rp-nav-menu__item__container rp-link">常见问题</a></li><li class="rp-nav-menu__item"><a href="https://pushy-admin.reactnative.cn/#/user" target="_blank" rel="noopener noreferrer" class="rp-nav-menu__item__container rp-link">登录</a></li><li class="rp-nav-menu__item"><a href="https://pushy-admin.reactnative.cn/#/register" target="_blank" rel="noopener noreferrer" class="rp-nav-menu__item__container rp-link">注册</a></li></ul><div class="rp-nav__others"><div class="rp-nav-menu__divider"></div><div class="rp-social-links"><a href="https://github.com/reactnativecn/react-native-update" target="_blank" rel="noopener noreferrer" class="rp-social-links__item"><div class="rp-social-links__icon"><div class="rp-social-links__icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"></ul></div></div><button aria-label="mobile hamburger" class="rp-nav-hamburger rp-nav-hamburger__sm"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="none" viewBox="0 0 21 21"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.667" d="M3.645 5.225h13.333M3.645 10.225h13.333M3.645 15.225h13.333"></path></svg></button><button aria-label="mobile hamburger" class="rp-nav-hamburger rp-nav-hamburger__md"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="none" viewBox="0 0 21 21"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.667" d="M3.645 5.225h13.333M3.645 10.225h13.333M3.645 15.225h13.333"></path></svg><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"><div class="rp-nav-menu__others-mobile__container"><div class="rp-nav-hamburger__md__hover-group"><div class="rp-nav-screen-divider"></div><div class="rp-social-links"><a href="https://github.com/reactnativecn/react-native-update" target="_blank" rel="noopener noreferrer" class="rp-social-links__item"><div class="rp-social-links__icon"><div class="rp-social-links__icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"></ul></div></div></div></ul></button></div></header><div class="rp-doc-layout__menu"><div class="rp-sidebar-menu"><button type="button" class="rp-sidebar-menu__left"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg><span>Menu</span></button><button type="button" disabled="" class="rp-sidebar-menu__right"><span class="rp-sidebar-menu__right__text">ON THIS PAGE</span><svg width="14" height="14" class="rp-progress-circle"><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-divider-light)" stroke-width="2"></circle><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-brand)" stroke-width="2" stroke-dasharray="37.69911184307752" stroke-dashoffset="37.69911184307752" transform="rotate(-90 7 7)" style="transition:stroke-dashoffset 0.3s"></circle></svg></button></div></div><div class="rp-doc-layout__container"><aside class="rp-doc-layout__sidebar rp-scrollbar"><div class="rp-sidebar-item rp-sidebar-group" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>快速入门</span></div><div class="rp-sidebar-item__right"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div style="display:grid;grid-template-rows:1fr;transition:grid-template-rows 0.2s ease-out"><div style="overflow:hidden"><a href="/docs/intro.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>产品简介</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/getting-started.html" class="rp-sidebar-item rp-sidebar-item--active rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>安装配置</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/integration.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>代码集成</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/publish.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>发布流程</span></div><div class="rp-sidebar-item__right"></div></a></div></div><div class="rp-sidebar-item rp-sidebar-group" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>高阶用法</span></div><div class="rp-sidebar-item__right"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div style="display:grid;grid-template-rows:1fr;transition:grid-template-rows 0.2s ease-out"><div style="overflow:hidden"><a href="/docs/api.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>API 文档</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/api-token.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>API Token</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/cli.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>命令行工具（内置）</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/cli_module.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>命令行工具（自定义模块）</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/bestpractice.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>场景实践</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/skills.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>Skills 安装与使用</span></div><div class="rp-sidebar-item__right"></div></a></div></div><div class="rp-sidebar-item rp-sidebar-group" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>其他</span></div><div class="rp-sidebar-item__right"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div style="display:grid;grid-template-rows:1fr;transition:grid-template-rows 0.2s ease-out"><div style="overflow:hidden"><a href="/docs/faq.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>常见问题</span></div><div class="rp-sidebar-item__right"></div></a></div></div></aside><div class="rp-doc-layout__doc"><main class="rp-doc-layout__doc-container"><div class="rp-doc rspress-doc"><h1 class="rp-toc-include" id="安装配置"><span>安装配置</span><a href="#安装配置" class="rp-header-anchor rp-link" aria-hidden="true">#</a> </h1><!--$--><div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
请注意，当前版本的api经过了完全重构，与之前的版本(v10.0以下)不兼容。如果你需要查看之前版本的文档，请点击<a href="https://v9--pushy-site.netlify.app/" target="_blank" rel="noopener noreferrer" class="rp-link">这里</a></p></div></div>
<p>首先你应该有一个基于 React Native 开发的应用，我们把具有 package.json 的目录叫做你的<code>应用根目录</code>。
如果你还没有初始化应用，请参阅<a href="https://reactnative.cn/docs/getting-started" target="_blank" rel="noopener noreferrer" class="rp-link">开始使用 React Native</a>。</p>
<p>我们假设你已经拥有了开发 React Native 应用的一切环境，包括<code>Node.js</code>、<code>Xcode</code>、<code>Android SDK</code>等等。</p>
<div class="rp-steps"><h3 class="rp-toc-include" id="安装"><a href="#安装" class="rp-header-anchor rp-link" aria-hidden="true">#</a>安装</h3><p>在你的项目根目录下运行以下命令（如果你使用 yarn 等其他包管理器，请自行替换命令）：</p><div class="rp-tabs"><div class="rp-tabs__label rp-tabs__label--no-scrollbar" style="justify-content:flex-start"><div class="rp-tabs__label__item rp-tabs__label__item--selected" data-index="0"></div><div class="rp-tabs__label__item rp-tabs__label__item--not-selected" data-index="1"></div></div><div class="rp-tabs__content"><div class="rp-tabs__content__item rp-tabs__content__item--active" aria-hidden="false" data-index="0"><div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-comment)"># 先全局安装命令行工具</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-token-string)"> i</span><span style="color:var(--shiki-token-string)"> -g</span><span style="color:var(--shiki-token-string)"> react-native-update-cli</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># 然后在项目目录中安装热更新模块</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-token-string)"> i</span><span style="color:var(--shiki-token-string)"> react-native-update</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># 如果没有使用 expo，则进入 iOS 目录安装 iOS 模块</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">cd</span><span style="color:var(--shiki-token-string)"> ios</span><span style="color:var(--shiki-token-punctuation)"> &amp;&amp;</span><span style="color:var(--shiki-token-function)"> pod</span><span style="color:var(--shiki-token-string)"> install</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div><div class="rp-tabs__content__item rp-tabs__content__item--hidden" aria-hidden="true" data-index="1"><div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-comment)"># 先全局安装命令行工具</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-token-string)"> i</span><span style="color:var(--shiki-token-string)"> -g</span><span style="color:var(--shiki-token-string)"> react-native-update-cli</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># 然后在项目目录中安装热更新模块</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-token-string)"> i</span><span style="color:var(--shiki-token-string)"> react-native-update</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># 如果使用 expo, 要求 expo 50 或更高版本，需要使用 prebuild 命令预构建项目</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">npx</span><span style="color:var(--shiki-token-string)"> expo</span><span style="color:var(--shiki-token-string)"> prebuild</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># 然后进入 iOS 目录安装 iOS 模块</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">cd</span><span style="color:var(--shiki-token-string)"> ios</span><span style="color:var(--shiki-token-punctuation)"> &amp;&amp;</span><span style="color:var(--shiki-token-function)"> pod</span><span style="color:var(--shiki-token-string)"> install</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><div class="rp-callout rp-callout--warning"><div class="rp-callout__title">Warning</div><div class="rp-callout__content"><p>
注意：如果使用
expo，请不要同时安装<code>expo-updates</code>，否则会导致热更新功能冲突。另外，expo 51
版本以下的新架构支持并不完整，可能无法正常使用。如需使用新架构，建议使用尽可能新的
expo 版本。</p></div></div></div></div></div><div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
如果下载极慢或者显示网络失败，请设置使用淘宝镜像 <code>npx nrm use taobao</code></p></div></div><div class="rp-callout rp-callout--warning"><div class="rp-callout__title">Warning</div><div class="rp-callout__content"><p>
注意请不要混用<code>npm/yarn/pnpm</code>等包管理器及对应的<code>lock</code>文件，团队成员请坚持使用同一包管理器，且仅保留统一格式的<code>lock</code>文件</p></div></div><div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
请记得，任意在 ios 和 android 目录下的修改，一定要重新编译（使用 npx
react-native run-ios 或 run-android 命令编译，或在 Xcode/Android Studio
中重新编译）才能生效。</p></div></div><h3 class="rp-toc-include" id="手动-link"><a href="#手动-link" class="rp-header-anchor rp-link" aria-hidden="true">#</a>手动 link</h3><p>如果 RN 版本 &gt;= 0.60 则不需要此手动 link 步骤。</p><div class="rp-callout rp-callout--warning"><div class="rp-callout__title">Warning</div><div class="rp-callout__content"><p>
注意：如果是混编 RN
项目，或monorepo，或任何其他自定义的情况，由于自定义的配置可能不完整或不适应RN的目录结构，导致自动
link 的功能可能不能正常工作。此时即便 RN 版本 &gt;= 0.60，你可能也需要执行手动
link 操作。</p></div></div><h4 class="rp-toc-include" id="ios"><a href="#ios" class="rp-header-anchor rp-link" aria-hidden="true">#</a>iOS</h4><details><summary>RN &lt; 0.60且使用CocoaPods（推荐）</summary><ol>
<li>在 ios/Podfile 中添加</li>
</ol><div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span>pod &#x27;react-native-update&#x27;, path: &#x27;../node_modules/react-native-update&#x27;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><ol start="2">
<li>在项目的 ios 目录下运行<code>pod install</code></li>
<li>重新编译</li>
</ol></details><details><summary>RN &lt; 0.60且不使用CocoaPods</summary><ol>
<li>在 XCode 中的 Project Navigator 里,右键点击<code>Libraries</code> ➜ <code>Add Files to [你的工程名]</code></li>
<li>进入<code>node_modules</code> ➜ <code>react-native-update</code> ➜ <code>ios 并选中</code>RCTPushy.xcodeproj`</li>
<li>在 XCode 中的 project navigator 里,选中你的工程,在 <code>Build Phases</code> ➜ <code>Link Binary With Libraries</code> 中添加 <code>libRCTPushy.a</code>、<code>libz.tbd</code>、<code>libbz2.1.0.tbd</code></li>
<li>继续在<code>Build Settings</code>里搜索<code>Header Search Path</code>，添加<code>$(SRCROOT)/../node_modules/react-native-update/ios</code>，勾选<code>recursive</code>。</li>
<li>在<code>Build Phases</code>添加一个<code>New Run Script Phase</code>运行脚本，内容如下</li>
</ol><div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span>#!/bin/bash</span></span>
<span class="line"><span>set -x</span></span>
<span class="line"><span>DEST=&quot;../node_modules/react-native-update/ios/&quot;</span></span>
<span class="line"><span>date +%s &gt; &quot;$DEST/pushy_build_time.txt&quot;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><ol start="7">
<li>尝试编译一下，顺利的话就会在<code>../node_modules/react-native-update/ios/</code>文件夹下面生成一个<code>pushy_build_time.txt</code>文件。然后在<code>Copy Bundle Resources</code>里把生成的<code>pushy_build_time.txt</code>文件添加进去。</li>
</ol></details><h4 class="rp-toc-include" id="android"><a href="#android" class="rp-header-anchor rp-link" aria-hidden="true">#</a>Android</h4><details><summary>RN &lt; 0.60 或其他不能自动 link 的情况</summary><ol>
<li>
<p>在<code>android/settings.gradle</code>中添加如下代码:</p>
<div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span>include &#x27;:react-native-update&#x27;</span></span>
<span class="line"><span>project(&#x27;:react-native-update&#x27;).projectDir = new File(rootProject.projectDir, 	&#x27;../node_modules/react-native-update/android&#x27;)</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
</li>
<li>
<p>在<code>android/app/build.gradle</code>的 dependencies 部分增加如下代码:</p>
<div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span>implementation project(&#x27;:react-native-update&#x27;)</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
</li>
<li>
<p>打开<code>android/app/src/main/java/[...]/MainApplication.java</code>,</p>
</li>
</ol><ul>
<li>在文件开头增加 <code>import cn.reactnative.modules.update.UpdatePackage;</code></li>
<li>在<code>getPackages()</code> 方法中增加 <code>new UpdatePackage()</code>(注意上一行可能要增加一个逗号)</li>
</ul></details><h3 class="rp-toc-include" id="配置-bundle-url"><a href="#配置-bundle-url" class="rp-header-anchor rp-link" aria-hidden="true">#</a>配置 Bundle URL</h3><p>如果你使用 <code>expo</code> 48 或更高版本，且 <code>react-native-update</code> &gt;= 10.28.2，则可以自动配置 bundle url，请直接去往<a href="#%E6%B7%BB%E5%8A%A0%E6%B5%8B%E8%AF%95%E7%94%A8%E7%9A%84-deep-link" class="rp-link">下一个步骤</a>。
如果你没有使用 <code>expo</code>，或 <code>expo</code> 版本低于 48，则需要按以下步骤手动配置。</p><h4 class="rp-toc-include" id="ios-1"><a href="#ios-1" class="rp-header-anchor rp-link" aria-hidden="true">#</a>iOS</h4><p>在你的 AppDelegate.mm 或 AppDelegate.m 或 AppDelegate.swift 文件（不同 RN 版本可能后缀名不同）中增加如下代码：</p><div class="rp-callout rp-callout--warning"><div class="rp-callout__title">Warning</div><div class="rp-callout__content"><p>
注意：如果你是混编原生的项目，务必注意<strong>不能直接指定 bundleURL 来初始化</strong>
rootView，需要先使用<code>initWithDelegate</code>方法来初始化
bridge，然后使用<code>initWithBridge</code>方法来初始化
rootView。否则热更新功能可能无法正常工作。</p></div></div><div class="rp-tabs"><div class="rp-tabs__label rp-tabs__label--no-scrollbar" style="justify-content:flex-start"><div class="rp-tabs__label__item rp-tabs__label__item--selected" data-index="0"></div><div class="rp-tabs__label__item rp-tabs__label__item--not-selected" data-index="1"></div></div><div class="rp-tabs__content"><div class="rp-tabs__content__item rp-tabs__content__item--active" aria-hidden="false" data-index="0"><div class="rp-codeblock language-c"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="c"><code><span class="line"><span style="color:var(--shiki-token-comment)">// ... 其它代码</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#import</span><span style="color:var(--shiki-token-string-expression)"> &quot;AppDelegate.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#import</span><span style="color:var(--shiki-token-string-expression)"> &quot;RCTPushy.h&quot;</span><span style="color:var(--shiki-token-comment)">  // &lt;-- import头文件，注意要放到if条件外面</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// 可能项目里有一些条件编译语句，例如有些版本RN自带的flipper</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// #if DEBUG</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// 注意**不要**在这里面引入&quot;RCTPushy.h&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// #import &lt;FlipperKit/FlipperClient.h&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// #endif</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// rn 版本 &gt;= 0.74 需要修改 bundleURL 方法</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">-</span><span style="color:var(--shiki-foreground)"> (NSURL </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-foreground)">)bundleURL</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#if</span><span style="color:var(--shiki-token-function)"> DEBUG</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  // 原先DEBUG这里的写法不作修改</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  return</span><span style="color:var(--shiki-foreground)"> [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@</span><span style="color:var(--shiki-token-string-expression)">&quot;index&quot;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#else</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  return</span><span style="color:var(--shiki-foreground)"> [RCTPushy bundleURL];</span><span style="color:var(--shiki-token-comment)">  // &lt;--  把这里非DEBUG的情况替换为热更新bundle</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#endif</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// rn 版本 &lt; 0.74 需要修改sourceURLForBridge方法</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">-</span><span style="color:var(--shiki-foreground)"> (NSURL </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-foreground)">)sourceURLForBridge:(RCTBridge </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-foreground)">)bridge</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#if</span><span style="color:var(--shiki-token-function)"> DEBUG</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  // 原先DEBUG这里的写法不作修改</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  return</span><span style="color:var(--shiki-foreground)"> [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@</span><span style="color:var(--shiki-token-string-expression)">&quot;index&quot;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#else</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  return</span><span style="color:var(--shiki-foreground)"> [RCTPushy bundleURL];</span><span style="color:var(--shiki-token-comment)">  // &lt;--  把这里非DEBUG的情况替换为热更新bundle</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#endif</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div><div class="rp-tabs__content__item rp-tabs__content__item--hidden" aria-hidden="true" data-index="1"><div class="rp-codeblock language-swift"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="swift"><code><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-function)"> UIKit</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-function)"> React</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-function)"> React_RCTAppDelegate</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-function)"> ReactAppDependencyProvider</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-function)"> react_native_update</span><span style="color:var(--shiki-token-comment)">    // &lt;-- 在这里引入，需要 pushy v10.22.0+ 版本</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">@main</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-token-function)"> AppDelegate</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)"> RCTAppDelegate </span><span style="color:var(--shiki-foreground)">{</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  // ... 其他代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  override</span><span style="color:var(--shiki-token-keyword)"> func</span><span style="color:var(--shiki-token-function)"> bundleURL</span><span style="color:var(--shiki-foreground)">() </span><span style="color:var(--shiki-token-keyword)">-&gt;</span><span style="color:var(--shiki-foreground)"> URL</span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">#</span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-foreground)"> DEBUG</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // 原先 DEBUG 这里的写法不作修改(所以 DEBUG 模式下不可热更新)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    RCTBundleURLProvider.</span><span style="color:var(--shiki-token-function)">sharedSettings</span><span style="color:var(--shiki-token-punctuation)">()</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">jsBundleURL</span><span style="color:var(--shiki-token-punctuation)">(</span><span style="color:var(--shiki-token-function)">forBundleRoot</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-string-expression)"> &quot;index&quot;</span><span style="color:var(--shiki-token-punctuation)">)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">#</span><span style="color:var(--shiki-token-keyword)">else</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    RCTPushy.</span><span style="color:var(--shiki-token-function)">bundleURL</span><span style="color:var(--shiki-token-punctuation)">()</span><span style="color:var(--shiki-token-comment)">  // &lt;--  把这里非 DEBUG 的情况替换为热更新 bundle</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">#</span><span style="color:var(--shiki-token-keyword)">endif</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div></div></div><h4 class="rp-toc-include" id="android-1"><a href="#android-1" class="rp-header-anchor rp-link" aria-hidden="true">#</a>Android</h4><p>在 MainApplication 中增加如下代码（如果是混编原生的项目或其他原因没有使用 ReactApplication，请<a href="/docs/api.html#updatecontextsetcustominstancemanagerreactinstancemanager-instancemanager" class="rp-link">使用此 api 集成</a>)：</p><div class="rp-tabs"><div class="rp-tabs__label rp-tabs__label--no-scrollbar" style="justify-content:flex-start"><div class="rp-tabs__label__item rp-tabs__label__item--selected" data-index="0"></div><div class="rp-tabs__label__item rp-tabs__label__item--not-selected" data-index="1"></div><div class="rp-tabs__label__item rp-tabs__label__item--not-selected" data-index="2"></div></div><div class="rp-tabs__content"><div class="rp-tabs__content__item rp-tabs__content__item--active" aria-hidden="false" data-index="0"><div class="rp-codeblock language-kotlin"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="kotlin"><code><span class="line"><span style="color:var(--shiki-token-comment)">// ... 其它代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↓↓↓请注意不要少了这句import</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> cn.reactnative.modules.update.UpdateContext</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↑↑↑</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-token-function)"> MainApplication</span><span style="color:var(--shiki-foreground)"> : </span><span style="color:var(--shiki-token-function)">Application</span><span style="color:var(--shiki-foreground)">(), </span><span style="color:var(--shiki-token-function)">ReactApplication</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  override</span><span style="color:var(--shiki-token-keyword)"> val</span><span style="color:var(--shiki-foreground)"> reactHost: </span><span style="color:var(--shiki-token-function)">ReactHost</span><span style="color:var(--shiki-token-function)"> by</span><span style="color:var(--shiki-token-function)"> lazy</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    getDefaultReactHost</span><span style="color:var(--shiki-foreground)">(</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      context </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-foreground)"> applicationContext,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      packageList </span><span style="color:var(--shiki-token-keyword)">=</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        PackageList</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-foreground)">).packages.</span><span style="color:var(--shiki-token-function)">apply</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          // Packages that cannot be auto-linked yet can be added manually here, for example:</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          // add(MyReactNativePackage())</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        },</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      // ↓↓↓ 添加下面这一段参数</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      jsBundleFilePath </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-foreground)"> UpdateContext.</span><span style="color:var(--shiki-token-function)">getBundleUrl</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-foreground)">),</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      // ↑↑↑</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    )</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  // ...其他代码</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div><div class="rp-tabs__content__item rp-tabs__content__item--hidden" aria-hidden="true" data-index="1"><div class="rp-codeblock language-kotlin"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="kotlin"><code><span class="line"><span style="color:var(--shiki-token-comment)">// ... 其它代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↓↓↓请注意不要少了这句import</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> cn.reactnative.modules.update.UpdateContext</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↑↑↑</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-token-function)"> MainApplication</span><span style="color:var(--shiki-foreground)"> : </span><span style="color:var(--shiki-token-function)">Application</span><span style="color:var(--shiki-foreground)">(), </span><span style="color:var(--shiki-token-function)">ReactApplication</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  override</span><span style="color:var(--shiki-token-keyword)"> val</span><span style="color:var(--shiki-foreground)"> reactNativeHost: </span><span style="color:var(--shiki-token-function)">ReactNativeHost</span><span style="color:var(--shiki-token-keyword)"> =</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">      object</span><span style="color:var(--shiki-foreground)"> : </span><span style="color:var(--shiki-token-function)">DefaultReactNativeHost</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-function)">this</span><span style="color:var(--shiki-foreground)">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        // ↓↓↓将下面这一段添加到 DefaultReactNativeHost 内部！</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">        override</span><span style="color:var(--shiki-token-keyword)"> fun</span><span style="color:var(--shiki-token-function)"> getJSBundleFile</span><span style="color:var(--shiki-foreground)">(): </span><span style="color:var(--shiki-token-function)">String</span><span style="color:var(--shiki-foreground)">? {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">          return</span><span style="color:var(--shiki-foreground)"> UpdateContext.</span><span style="color:var(--shiki-token-function)">getBundleUrl</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">this@MainApplication</span><span style="color:var(--shiki-foreground)">)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        }</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        // ↑↑↑</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        // ...其他代码</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div><div class="rp-tabs__content__item rp-tabs__content__item--hidden" aria-hidden="true" data-index="2"><div class="rp-codeblock language-java"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="java"><code><span class="line"><span style="color:var(--shiki-token-comment)">// ... 其它代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↓↓↓请注意不要少了这句import</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-keyword)"> cn</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">reactnative</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">modules</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">update</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">UpdateContext</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↑↑↑</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">public</span><span style="color:var(--shiki-token-keyword)"> class</span><span style="color:var(--shiki-token-function)"> MainApplication</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> Application</span><span style="color:var(--shiki-token-keyword)"> implements</span><span style="color:var(--shiki-token-function)"> ReactApplication</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  private</span><span style="color:var(--shiki-token-keyword)"> final</span><span style="color:var(--shiki-token-keyword)"> ReactNativeHost</span><span style="color:var(--shiki-foreground)"> mReactNativeHost </span><span style="color:var(--shiki-token-keyword)">=</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // 老版本 RN 这里可能是 new ReactNativeHost(this)</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">    new</span><span style="color:var(--shiki-token-function)"> DefaultReactNativeHost(</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-token-function)">)</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // ↓↓↓将下面这一段添加到 DefaultReactNativeHost 内部！</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    @</span><span style="color:var(--shiki-token-keyword)">Override</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">    protected</span><span style="color:var(--shiki-token-keyword)"> String</span><span style="color:var(--shiki-token-function)"> getJSBundleFile</span><span style="color:var(--shiki-foreground)">() {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">        return</span><span style="color:var(--shiki-token-constant)"> UpdateContext</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-function)">getBundleUrl</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">MainApplication</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-foreground)">);</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // ↑↑↑</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // ...其他代码</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div></div></div><div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
请记得，任意在 ios 和 android 目录下的修改，一定要重新编译（npx react-native
run-ios 或 run-android 命令编译，或在 Xcode/Android Studio
中重新编译）才能生效。</p></div></div><h4 class="rp-toc-include" id="harmony"><a href="#harmony" class="rp-header-anchor rp-link" aria-hidden="true">#</a>Harmony</h4><p>在 <code>harmony/entry/src/main/cpp/CMakeLists.txt</code> 中增加如下依赖：</p><div class="rp-codeblock language-c"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="c"><code><span class="line"><span style="color:var(--shiki-token-function)">add_subdirectory</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&quot;${OH_MODULES}/pushy/src/main/cpp&quot;</span><span style="color:var(--shiki-foreground)"> .</span><span style="color:var(--shiki-token-keyword)">/</span><span style="color:var(--shiki-foreground)">pushy)</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">target_link_libraries</span><span style="color:var(--shiki-foreground)">(rnoh_app PUBLIC rnoh_pushy)</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/entry/src/main/cpp/PackageProvider.cpp</code> 中增加如下依赖：</p><div class="rp-codeblock language-c"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="c"><code><span class="line"><span style="color:var(--shiki-token-keyword)">#include</span><span style="color:var(--shiki-token-string-expression)"> &quot;RNOH/PackageProvider.h&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">#include</span><span style="color:var(--shiki-token-string-expression)"> &quot;PushyPackage.h&quot;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">using namespace rnoh;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">std::vector</span><span style="color:var(--shiki-token-keyword)">&lt;</span><span style="color:var(--shiki-foreground)">std::shared_ptr</span><span style="color:var(--shiki-token-keyword)">&lt;</span><span style="color:var(--shiki-foreground)">Package</span><span style="color:var(--shiki-token-keyword)">&gt;&gt;</span><span style="color:var(--shiki-foreground)"> PackageProvider::</span><span style="color:var(--shiki-token-function)">getPackages</span><span style="color:var(--shiki-foreground)">(Package::Context ctx) {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">    return</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">         std::make_shared</span><span style="color:var(--shiki-token-keyword)">&lt;</span><span style="color:var(--shiki-foreground)">PushyPackage</span><span style="color:var(--shiki-token-keyword)">&gt;</span><span style="color:var(--shiki-foreground)">(ctx)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    };</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/entry/oh-package.json5</code> 中增加如下依赖：</p><div class="rp-codeblock language-json5"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="json5"><code><span class="line"><span style="color:var(--shiki-token-string-expression)">&quot;dependencies&quot;</span><span style="color:var(--shiki-foreground)">: {</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression)">  &quot;pushy&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-string-expression)"> &quot;file:../../node_modules/react-native-update/harmony/pushy&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/build-profile.json5</code> 中增加如下配置：</p><div class="rp-codeblock language-json5"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="json5"><code><span class="line"><span style="color:var(--shiki-foreground)">  modules: [</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // ↓↓↓将下面这一段添加到 modules 内部！</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    {</span></span>
<span class="line"><span style="color:var(--shiki-token-string)">      name</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;pushy&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-token-string)">      srcPath</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../node_modules/react-native-update/harmony/pushy&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  ],</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/hvigor/hvigor-config.json5</code> 中增加如下配置：</p><div class="rp-codeblock language-json5"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="json5"><code><span class="line"><span style="color:var(--shiki-foreground)">{</span></span>
<span class="line"><span style="color:var(--shiki-token-string)">  dependencies</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-string)">    pushy</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-string-expression)"> &quot;file:../../node_modules/react-native-update/harmony/pushy&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/entry/hvigorfile.ts</code> 中增加如下配置：</p><div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { hapTasks } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &quot;@ohos/hvigor-ohos-plugin&quot;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { reactNativeUpdatePlugin } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &quot;pushy/hvigor-plugin&quot;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> default</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  system</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> hapTasks </span><span style="color:var(--shiki-token-comment)">/* Built-in plugin of Hvigor. It cannot be modified. */</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  plugins</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> [</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    reactNativeUpdatePlugin</span><span style="color:var(--shiki-foreground)">()</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  ] </span><span style="color:var(--shiki-token-comment)">/* Custom plugin to extend the functionality of Hvigor. */</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">};</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/entry/src/main/ets/RNPackagesFactory.ts</code> 代码如下：</p><div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-keyword)"> type</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  RNPackageContext</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  RNPackage</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">} </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &quot;@rnoh/react-native-openharmony/ts&quot;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { PushyPackage } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &quot;pushy/ts&quot;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> createRNPackages</span><span style="color:var(--shiki-foreground)">(ctx</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> RNPackageContext</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> RNPackage</span><span style="color:var(--shiki-foreground)">[] {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  return</span><span style="color:var(--shiki-foreground)"> [</span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-token-function)"> PushyPackage</span><span style="color:var(--shiki-foreground)">(ctx)];</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>在 <code>harmony/entry/src/main/ets/pages/Index.ets</code> 中增加如下代码：</p><div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">// ... 其它代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↓↓↓请注意不要少了这句import</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { PushyFileJSBundleProvider } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;pushy/src/main/ets/PushyFileJSBundleProvider&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// ↑↑↑</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">@Entry</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">@Component</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">struct Index {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  @</span><span style="color:var(--shiki-token-function)">StorageLink</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;RNOHCoreContext&#x27;</span><span style="color:var(--shiki-foreground)">) private rnohCoreContext</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-foreground)"> RNOHCoreContext </span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-constant)"> undefined</span><span style="color:var(--shiki-token-keyword)"> =</span><span style="color:var(--shiki-token-constant)"> undefined</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  @State shouldShow</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-foreground)"> boolean </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-constant)"> false</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function)">  aboutToAppear</span><span style="color:var(--shiki-foreground)">(): </span><span style="color:var(--shiki-token-keyword)">void</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-constant)">    this</span><span style="color:var(--shiki-foreground)">.shouldShow </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-constant)"> true</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function)">  onBackPress</span><span style="color:var(--shiki-foreground)">(): boolean </span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-constant)"> undefined</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // NOTE: this is required since `Ability`&#x27;s `onBackPressed` function always</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // terminates or puts the app in the background, but we want Ark to ignore it completely</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // when handled by RN</span></span>
<span class="line"><span style="color:var(--shiki-token-constant)">    this</span><span style="color:var(--shiki-foreground)">.rnohCoreContext</span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-function)">.dispatchBackPress</span><span style="color:var(--shiki-foreground)">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // this.preferences = preferences.getPreferencesSync(this.context, {name:&#x27;update&#x27;});</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">    return</span><span style="color:var(--shiki-token-constant)"> true</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function)">  build</span><span style="color:var(--shiki-foreground)">() {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    Column</span><span style="color:var(--shiki-foreground)">() {</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">      if</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-foreground)">.rnohCoreContext </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-token-constant)"> this</span><span style="color:var(--shiki-foreground)">.shouldShow) {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        RNApp</span><span style="color:var(--shiki-foreground)">({</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          // ... 其他代码</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">          jsBundleProvider</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-keyword)"> new</span><span style="color:var(--shiki-token-function)"> TraceJSBundleProviderDecorator</span><span style="color:var(--shiki-foreground)">(</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">            new</span><span style="color:var(--shiki-token-function)"> AnyJSBundleProvider</span><span style="color:var(--shiki-foreground)">([</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">              // MetroJSBundleProvider.fromServerIp(&#x27;127.0.0.1&#x27;),</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">              // new ResourceJSBundleProvider(rnohCoreContext.uiAbilityContext.resourceManager, &#x27;hermes_bundle.hbc&#x27;),</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">              // ↓↓↓将下面这一段添加到 AnyJSBundleProvider 内部！</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">              new</span><span style="color:var(--shiki-token-function)"> PushyFileJSBundleProvider</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-constant)">rnohCoreContext</span><span style="color:var(--shiki-foreground)">.uiAbilityContext)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">              // 注意无论是否使用 hermes 格式，请保持 bundle 文件名为 bundle.harmony.js</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">              new</span><span style="color:var(--shiki-token-function)"> ResourceJSBundleProvider</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-constant)">rnohCoreContext</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-constant)">uiAbilityContext</span><span style="color:var(--shiki-foreground)">.resourceManager</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> &#x27;bundle.harmony.js&#x27;</span><span style="color:var(--shiki-foreground)">)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">            ])</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-token-constant)">            this</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-constant)">rnohCoreContext</span><span style="color:var(--shiki-foreground)">.logger)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        })</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    .height</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;100%&#x27;</span><span style="color:var(--shiki-foreground)">)</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    .width</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;100%&#x27;</span><span style="color:var(--shiki-foreground)">)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
请记得，任意在 ios 和 android 目录下的修改，一定要重新编译（npx react-native
run-ios 或 run-android 命令编译，或在 Xcode/Android Studio
中重新编译）才能生效。</p></div></div><h3 class="rp-toc-include" id="覆盖-android-的-oncreate"><a href="#覆盖-android-的-oncreate" class="rp-header-anchor rp-link" aria-hidden="true">#</a>覆盖 android 的 onCreate</h3><p>如果你有安装 <code>react-native-screens</code> (使用 <code>react-navigation</code> 一般都会要求安装)，则安卓端在热更后重启可能会白屏。此时需要在 Android 的 <code>MainActivity</code> 中设置 <code>RNScreensFragmentFactory</code>，以确保 Fragment 恢复流程一致，避免崩溃。注意不要把这段覆盖写在 <code>MainActivityDelegate</code> 里，而是直接放在 <code>MainActivity</code> 中。
更多说明可以参考 <code>react-native-screens</code> 的 <a href="https://github.com/software-mansion/react-native-screens?tab=readme-ov-file#android" target="_blank" rel="noopener noreferrer" class="rp-link">readme</a></p><div class="rp-tabs"><div class="rp-tabs__label rp-tabs__label--no-scrollbar" style="justify-content:flex-start"><div class="rp-tabs__label__item rp-tabs__label__item--selected" data-index="0"></div><div class="rp-tabs__label__item rp-tabs__label__item--not-selected" data-index="1"></div></div><div class="rp-tabs__content"><div class="rp-tabs__content__item rp-tabs__content__item--active" aria-hidden="false" data-index="0"><div class="rp-codeblock language-kotlin"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="kotlin"><code><span class="line"><span style="color:var(--shiki-token-comment)">// android/app/src/main/java/[...]/MainActivity.kt</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> android.os.Bundle</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> com.swmansion.rnscreens.fragment.restoration.RNScreensFragmentFactory</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-token-function)"> MainActivity</span><span style="color:var(--shiki-foreground)"> : </span><span style="color:var(--shiki-token-function)">ReactActivity</span><span style="color:var(--shiki-foreground)">() {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  // ...其他代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  override</span><span style="color:var(--shiki-token-keyword)"> fun</span><span style="color:var(--shiki-token-function)"> onCreate</span><span style="color:var(--shiki-foreground)">(savedInstanceState: </span><span style="color:var(--shiki-token-function)">Bundle</span><span style="color:var(--shiki-foreground)">?) {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    supportFragmentManager.fragmentFactory </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> RNScreensFragmentFactory</span><span style="color:var(--shiki-foreground)">()</span></span>
<span class="line"><span style="color:var(--shiki-token-constant)">    super</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">onCreate</span><span style="color:var(--shiki-foreground)">(savedInstanceState)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // 如果你用的版本比较老，没有 RNScreensFragmentFactory，则使用下面的写法</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // super.onCreate(null)</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div><div class="rp-tabs__content__item rp-tabs__content__item--hidden" aria-hidden="true" data-index="1"><div class="rp-codeblock language-java"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="java"><code><span class="line"><span style="color:var(--shiki-token-comment)">// android/app/src/main/java/[...]/MainActivity.java</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-keyword)"> android</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">os</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">Bundle</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-keyword)"> com</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">swmansion</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">rnscreens</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">fragment</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">restoration</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-keyword)">RNScreensFragmentFactory</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">public</span><span style="color:var(--shiki-token-keyword)"> class</span><span style="color:var(--shiki-token-function)"> MainActivity</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> ReactActivity</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  // ...其他代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">  @</span><span style="color:var(--shiki-token-keyword)">Override</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">  protected</span><span style="color:var(--shiki-token-keyword)"> void</span><span style="color:var(--shiki-token-function)"> onCreate</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-keyword)">Bundle</span><span style="color:var(--shiki-foreground)"> savedInstanceState) {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    getSupportFragmentManager()</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-function)">setFragmentFactory</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-token-function)"> RNScreensFragmentFactory()</span><span style="color:var(--shiki-foreground)">);</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    super</span><span style="color:var(--shiki-token-punctuation)">.</span><span style="color:var(--shiki-token-function)">onCreate</span><span style="color:var(--shiki-foreground)">(savedInstanceState);</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // 如果你用的版本比较老，没有 RNScreensFragmentFactory，则使用下面的写法</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // super.onCreate(null);</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div></div></div><h3 class="rp-toc-include" id="添加测试用的-deep-link"><a href="#添加测试用的-deep-link" class="rp-header-anchor rp-link" aria-hidden="true">#</a>添加测试用的 Deep Link</h3><p>此步骤可以极其便利的在和用户完全一致的环境中安全地测试热更新，无需额外的设备注册步骤，也不影响现有的热更新流程。</p><div class="rp-tabs"><div class="rp-tabs__label rp-tabs__label--no-scrollbar" style="justify-content:flex-start"><div class="rp-tabs__label__item rp-tabs__label__item--selected" data-index="0"></div><div class="rp-tabs__label__item rp-tabs__label__item--not-selected" data-index="1"></div></div><div class="rp-tabs__content"><div class="rp-tabs__content__item rp-tabs__content__item--active" aria-hidden="false" data-index="0"><p>在 <code>android/app/src/main/AndroidManifest.xml</code> 中添加如下代码：</p><div class="rp-codeblock language-xml"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="xml"><code><span class="line"><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-string-expression)">manifest</span><span style="color:var(--shiki-token-function)"> xmlns</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">android</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;http://schemas.android.com/apk/res/android&quot;</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  &lt;</span><span style="color:var(--shiki-token-string-expression)">application</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    &lt;!-- 其他代码 --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    &lt;!-- ↓↓↓ 注意 activity 的 launchMode 需要设置为 singleTask --&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    &lt;</span><span style="color:var(--shiki-token-string-expression)">activity</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">      android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">launchMode</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;singleTask&quot;</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      &lt;!-- ↑↑↑ --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">      &lt;</span><span style="color:var(--shiki-token-string-expression)">intent-filter</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        &lt;</span><span style="color:var(--shiki-token-string-expression)">action</span><span style="color:var(--shiki-token-function)"> android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">name</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;android.intent.action.MAIN&quot;</span><span style="color:var(--shiki-foreground)"> /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        &lt;</span><span style="color:var(--shiki-token-string-expression)">category</span><span style="color:var(--shiki-token-function)"> android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">name</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;android.intent.category.LAUNCHER&quot;</span><span style="color:var(--shiki-foreground)"> /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      &lt;/</span><span style="color:var(--shiki-token-string-expression)">intent-filter</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      &lt;!-- ↓↓↓ 添加如下 intent-filter， 注意和上面的 intent-filter 是不同的 action 和 category --&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      &lt;</span><span style="color:var(--shiki-token-string-expression)">intent-filter</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        &lt;</span><span style="color:var(--shiki-token-string-expression)">action</span><span style="color:var(--shiki-token-function)"> android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">name</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;android.intent.action.VIEW&quot;</span><span style="color:var(--shiki-foreground)"> /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        &lt;</span><span style="color:var(--shiki-token-string-expression)">category</span><span style="color:var(--shiki-token-function)"> android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">name</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;android.intent.category.DEFAULT&quot;</span><span style="color:var(--shiki-foreground)"> /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        &lt;</span><span style="color:var(--shiki-token-string-expression)">category</span><span style="color:var(--shiki-token-function)"> android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">name</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;android.intent.category.BROWSABLE&quot;</span><span style="color:var(--shiki-foreground)"> /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        &lt;!-- 添加你自定义的 scheme --&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        &lt;</span><span style="color:var(--shiki-token-string-expression)">data</span><span style="color:var(--shiki-token-function)"> android</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-token-function)">scheme</span><span style="color:var(--shiki-foreground)">=</span><span style="color:var(--shiki-token-string-expression)">&quot;你自定义的协议名，请不要和常见协议名或其他app冲突&quot;</span><span style="color:var(--shiki-foreground)"> /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      &lt;/</span><span style="color:var(--shiki-token-string-expression)">intent-filter</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      &lt;!-- ↑↑↑ --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">    &lt;/</span><span style="color:var(--shiki-token-string-expression)">activity</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  &lt;/</span><span style="color:var(--shiki-token-string-expression)">application</span><span style="color:var(--shiki-foreground)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">&lt;/</span><span style="color:var(--shiki-token-string-expression)">manifest</span><span style="color:var(--shiki-foreground)">&gt;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div><div class="rp-tabs__content__item rp-tabs__content__item--hidden" aria-hidden="true" data-index="1"><p>请参考 <a href="https://reactnative.cn/docs/next/linking#%E5%90%AF%E7%94%A8-deep-links" target="_blank" rel="noopener noreferrer" class="rp-link">React Native 的文档</a></p></div></div></div><hr/><p>在完成上述配置并编译，并且日后上传了热更包，在后台能看到热更版本之后，你就可以将鼠标移到网页后台的二维码图标上，如下图所示：</p><p><img alt="Deep Link二维码" src="/static/image/deeplinkqrcode.e4a16cb983.jpg"/></p><p>勾选<code>使用 Deep Link</code>选项，在后面的输入框中填入你自定义的协议名，在二维码刷新后，即可在设备上直接使用系统相机或扫码功能（注意不能使用微信扫码）来扫描，即可自动触发热更检查功能。</p><p>第一次扫码后可能只是触发服务器任务队列，会弹出提示 10 秒后重新扫码，此时会获得热更包，触发内置或自定义的更新策略。</p><p>注意如果你使用自定义的更新策略，请务必从<code>useUpdate()</code>中获取<code>updateInfo</code>，而不要依赖<code>checkUpdate</code>方法的返回值，否则扫码不会有后续动作。</p><h3 class="rp-toc-include" id="禁用-android-的-crunch-优化"><a href="#禁用-android-的-crunch-优化" class="rp-header-anchor rp-link" aria-hidden="true">#</a>禁用 android 的 crunch 优化</h3><p>android 会在生成 apk 时自动对 png 图片进行压缩，此操作既耗时又影响增量补丁的生成。为了保证补丁能正常生成，您需要在<code>android/app/build.gradle</code>中关闭此操作：</p><div class="rp-codeblock language-groovy"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="groovy"><code><span class="line"><span style="color:var(--shiki-token-comment)">// 在 android/app/build.gradle 文件中</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">android {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    // ...</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    signingConfigs {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      // ...</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    buildTypes {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        release {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">            // ...</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">            // 添加下面这行以禁用crunch</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">            crunchPngs </span><span style="color:var(--shiki-token-constant)">false</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><h3 class="rp-toc-include" id="禁用-aab-包的资源分割如果你需要在-google-play-上架"><a href="#禁用-aab-包的资源分割如果你需要在-google-play-上架" class="rp-header-anchor rp-link" aria-hidden="true">#</a>禁用 aab 包的资源分割（如果你需要在 Google Play 上架）</h3><p>如果你需要打 aab 包以在 Google Play 上架，且 react-native-update 版本 低于 10.36.0，则需要禁用 aab 包的资源分割。若已升级到 10.36.0+ 版本，则不需要此设置。</p><div class="rp-codeblock language-groovy"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="groovy"><code><span class="line"><span style="color:var(--shiki-token-comment)">// 在 android/app/build.gradle 文件中</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-foreground)">android {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bundle {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        density {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">            // 请禁用资源分割</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">            // 否则热更后可能遇到图片无法显示的问题</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">            // v10.36.0 版本之后不需要此设置</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">            enableSplit </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-constant)"> false</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><h3 class="rp-toc-include" id="登录与创建应用"><a href="#登录与创建应用" class="rp-header-anchor rp-link" aria-hidden="true">#</a>登录与创建应用</h3><p>首先请在 <a href="https://pushy-admin.reactnative.cn" target="_blank" rel="noopener noreferrer" class="rp-link">https://pushy-admin.reactnative.cn</a> 注册帐号，然后在你的项目根目录下运行以下命令：</p><div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> login</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">email:</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">输入你的注册邮</span><span style="color:var(--shiki-foreground)">箱</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">password:</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">输入你的密</span><span style="color:var(--shiki-foreground)">码</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>这会在项目文件夹下创建一个<code>.update</code>文件，注意不要把这个文件上传到 Git 等 CVS 系统上。你可以在<code>.gitignore</code>末尾增加一行<code>.update</code>来忽略这个文件。</p><p>登录之后可以创建应用。注意 iOS 平台、安卓平台、鸿蒙平台需要分别创建：</p><div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> createApp</span><span style="color:var(--shiki-token-string)"> --platform</span><span style="color:var(--shiki-token-string)"> ios</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">App</span><span style="color:var(--shiki-token-string)"> Name:</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">输入应用名</span><span style="color:var(--shiki-foreground)">字</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> createApp</span><span style="color:var(--shiki-token-string)"> --platform</span><span style="color:var(--shiki-token-string)"> android</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">App</span><span style="color:var(--shiki-token-string)"> Name:</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">输入应用名</span><span style="color:var(--shiki-foreground)">字</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> createApp</span><span style="color:var(--shiki-token-string)"> --platform</span><span style="color:var(--shiki-token-string)"> harmony</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">App</span><span style="color:var(--shiki-token-string)"> Name:</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">输入应用名</span><span style="color:var(--shiki-foreground)">字</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
应用的名字可以相同，这没有关系。</p></div></div><p>如果你已经在网页端或者其它地方创建过应用，也可以直接选择应用：</p><div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> selectApp</span><span style="color:var(--shiki-token-string)"> --platform</span><span style="color:var(--shiki-token-string)"> ios</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">1</span><span style="color:var(--shiki-foreground)">) 鱼多多(</span><span style="color:var(--shiki-token-function)">ios</span><span style="color:var(--shiki-foreground)">)</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">2</span><span style="color:var(--shiki-foreground)">) 招财旺(</span><span style="color:var(--shiki-token-function)">ios</span><span style="color:var(--shiki-foreground)">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-function)">Total</span><span style="color:var(--shiki-token-constant)"> 2</span><span style="color:var(--shiki-token-string)"> ios</span><span style="color:var(--shiki-token-string)"> apps</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">Enter</span><span style="color:var(--shiki-token-string)"> appId:</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">输入应用前面的编</span><span style="color:var(--shiki-foreground)">号</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>选择或者创建过应用后，你将可以在文件夹下看到<code>update.json</code>文件，其内容类似如下形式：</p><div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-foreground)">{</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    &quot;ios&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        &quot;appId&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string)"> 1,</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        &quot;appKey&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string-expression)"> &quot;&lt;一串随机字符串&gt;&quot;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    },</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    &quot;android&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        &quot;appId&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string)"> 2,</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        &quot;appKey&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string-expression)"> &quot;&lt;一串随机字符串&gt;&quot;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    },</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    &quot;harmony&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        &quot;appId&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string)"> 3,</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">        &quot;appKey&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-string-expression)"> &quot;&lt;一串随机字符串&gt;&quot;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><p>你可以安全的把<code>update.json</code>上传到 Git 等 CVS 系统上，与你的团队共享这个文件，它不包含任何敏感信息。当然，他们在使用任何功能之前，都必须首先输入<code>pushy login</code>进行登录。</p><p>至此应用的创建/选择就已经成功了。下一步，你需要给代码添加相应的功能，请参阅<a href="/docs/integration.html" class="rp-link">代码集成</a>。</p></div>
<div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span></span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><!--/$--></div><footer class="rp-doc-footer"><div class="rp-doc-footer__edit"></div><div class="rp-doc-footer__divider"></div><div class="rp-prev-next-page"><a href="/docs/intro.html" class="rp-prev-next-page__item rp-prev-next-page__prev rp-link"><span class="rp-prev-next-page__item__desc">Previous page</span><span class="rp-prev-next-page__item__title"><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-prev-next-page__icon rp-prev-next-page__rotate_180"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg><span>产品简介</span></span></a><a href="/docs/integration.html" class="rp-prev-next-page__item rp-prev-next-page__next rp-link"><span class="rp-prev-next-page__item__desc">Next page</span><span class="rp-prev-next-page__item__title"><span>代码集成</span><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-prev-next-page__icon"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></span></a></div></footer></main></div><aside class="rp-doc-layout__outline rp-scrollbar"></aside></div></div>
    <div id="__rspress_modal_container"></div>
  </body>
</html>
