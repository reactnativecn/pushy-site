<!doctype html>
<html lang="en">
  <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>发布热更新 - Pushy 极速热更新</title>
<link href="/static/css/styles.409712dc65.css" rel="stylesheet">
<script defer src="/static/js/styles.4dcab8ad6b.js"></script>
<script defer src="/static/js/lib-react.95becf39cf.js"></script>
<script defer src="/static/js/lib-router.cb3c8eabdf.js"></script>
<script defer src="/static/js/7694.bdf0171163.js"></script>
<script defer src="/static/js/index.2ba1efd8a8.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Rspress v2.0.3">
<meta property="og:keywords" content="热更新,hotupdate,免审核,快速上架">
<link rel="icon" href="/logo.svg" type="image/svg+xml">
<meta property="og:type" content="website">
<meta property="og:title" content="发布热更新 - Pushy 极速热更新">
<meta name="description" content="Pushy 极速热更新">
<meta property="og:description" content="Pushy 极速热更新"></head>

  <body>
    <div id="__rspress_root"><link rel="preload" as="image" href="/images/logo.svg"/><header class="rp-nav"><div class="rp-nav__left"><div class="rp-nav__title"><a href="/" class="rp-nav__title__link rp-link"><div class="rp-nav__title__logo"><img src="/images/logo.svg" alt="logo" id="logo" class="rspress-logo rp-nav__title__logo-image rp-nav__title__logo-image--light"/><img src="/images/logo.svg" alt="logo" id="logo" class="rspress-logo rp-nav__title__logo-image rp-nav__title__logo-image--dark"/></div><span>Pushy 极速热更新</span></a></div></div><div class="rp-nav__right"><button class="rp-search-button"><div class="rp-search-button__content"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 20 21" class="rp-search-button__icon"><path fill="currentColor" d="M8.333 1.913A6.667 6.667 0 0 1 15 8.58c0 1.54-.525 2.957-1.402 4.085l4.49 4.492a.834.834 0 0 1-1.177 1.178l-4.491-4.49a6.64 6.64 0 0 1-4.087 1.402 6.667 6.667 0 0 1 0-13.334m0 1.667a5 5 0 1 0 0 10 5 5 0 0 0 0-10"></path></svg><span class="rp-search-button__word">Search</span></div><div class="rp-search-button__hotkey" style="opacity:0"><span></span><span>K</span></div></button><div class="rp-search-button--mobile"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 20 21"><path fill="currentColor" d="M8.333 1.913A6.667 6.667 0 0 1 15 8.58c0 1.54-.525 2.957-1.402 4.085l4.49 4.492a.834.834 0 0 1-1.177 1.178l-4.491-4.49a6.64 6.64 0 0 1-4.087 1.402 6.667 6.667 0 0 1 0-13.334m0 1.667a5 5 0 1 0 0 10 5 5 0 0 0 0-10"></path></svg></div><ul class="rp-nav-menu rp-nav-menu--right"><li class="rp-nav-menu__item rp-nav-menu__item--active"><a href="/index.html" class="rp-nav-menu__item__container rp-link">首页</a></li><li class="rp-nav-menu__item rp-nav-menu__item--active"><a href="/docs/intro.html" class="rp-nav-menu__item__container rp-link">文档</a></li><li class="rp-nav-menu__item"><a href="/pricing.html" class="rp-nav-menu__item__container rp-link">价格</a></li><li class="rp-nav-menu__item"><a href="/docs/faq.html" class="rp-nav-menu__item__container rp-link">常见问题</a></li><li class="rp-nav-menu__item"><a href="https://pushy-admin.reactnative.cn/#/user" target="_blank" rel="noopener noreferrer" class="rp-nav-menu__item__container rp-link">登录</a></li><li class="rp-nav-menu__item"><a href="https://pushy-admin.reactnative.cn/#/register" target="_blank" rel="noopener noreferrer" class="rp-nav-menu__item__container rp-link">注册</a></li></ul><div class="rp-nav__others"><div class="rp-nav-menu__divider"></div><div class="rp-social-links"><a href="https://github.com/reactnativecn/react-native-update" target="_blank" rel="noopener noreferrer" class="rp-social-links__item"><div class="rp-social-links__icon"><div class="rp-social-links__icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"></ul></div></div><button aria-label="mobile hamburger" class="rp-nav-hamburger rp-nav-hamburger__sm"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="none" viewBox="0 0 21 21"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.667" d="M3.645 5.225h13.333M3.645 10.225h13.333M3.645 15.225h13.333"></path></svg></button><button aria-label="mobile hamburger" class="rp-nav-hamburger rp-nav-hamburger__md"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="none" viewBox="0 0 21 21"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.667" d="M3.645 5.225h13.333M3.645 10.225h13.333M3.645 15.225h13.333"></path></svg><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"><div class="rp-nav-menu__others-mobile__container"><div class="rp-nav-hamburger__md__hover-group"><div class="rp-nav-screen-divider"></div><div class="rp-social-links"><a href="https://github.com/reactnativecn/react-native-update" target="_blank" rel="noopener noreferrer" class="rp-social-links__item"><div class="rp-social-links__icon"><div class="rp-social-links__icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"></ul></div></div></div></ul></button></div></header><div class="rp-doc-layout__menu"><div class="rp-sidebar-menu"><button type="button" class="rp-sidebar-menu__left"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg><span>Menu</span></button><button type="button" class="rp-sidebar-menu__right"><span class="rp-sidebar-menu__right__text">ON THIS PAGE</span><svg width="14" height="14" class="rp-progress-circle"><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-divider-light)" stroke-width="2"></circle><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-brand)" stroke-width="2" stroke-dasharray="37.69911184307752" stroke-dashoffset="37.69911184307752" transform="rotate(-90 7 7)" style="transition:stroke-dashoffset 0.3s"></circle></svg><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-sidebar-menu__right__icon" style="transform:rotate(0deg);transition:transform 0.2s ease-out"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></button></div></div><div class="rp-doc-layout__container"><aside class="rp-doc-layout__sidebar rp-scrollbar"><div class="rp-sidebar-item rp-sidebar-group" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>快速入门</span></div><div class="rp-sidebar-item__right"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div style="display:grid;grid-template-rows:1fr;transition:grid-template-rows 0.2s ease-out"><div style="overflow:hidden"><a href="/docs/intro.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>产品简介</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/getting-started.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>安装配置</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/integration.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>代码集成</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/publish.html" class="rp-sidebar-item rp-sidebar-item--active rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>发布流程</span></div><div class="rp-sidebar-item__right"></div></a></div></div><div class="rp-sidebar-item rp-sidebar-group" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>高阶用法</span></div><div class="rp-sidebar-item__right"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div style="display:grid;grid-template-rows:1fr;transition:grid-template-rows 0.2s ease-out"><div style="overflow:hidden"><a href="/docs/api.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>API 文档</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/api-token.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>API Token</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/cli.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>命令行工具（内置）</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/cli_module.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>命令行工具（自定义模块）</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/bestpractice.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>场景实践</span></div><div class="rp-sidebar-item__right"></div></a><a href="/docs/skills.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>Skills 安装与使用</span></div><div class="rp-sidebar-item__right"></div></a></div></div><div class="rp-sidebar-item rp-sidebar-group" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>其他</span></div><div class="rp-sidebar-item__right"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div style="display:grid;grid-template-rows:1fr;transition:grid-template-rows 0.2s ease-out"><div style="overflow:hidden"><a href="/docs/faq.html" class="rp-sidebar-item rp-sidebar-item--group-item rp-link" style="padding-left:calc(12px * 1 + 12px)" data-depth="1"><div class="rp-sidebar-item__left"><span>常见问题</span></div><div class="rp-sidebar-item__right"></div></a></div></div></aside><div class="rp-doc-layout__doc"><main class="rp-doc-layout__doc-container"><div class="rp-doc rspress-doc"><h1 class="rp-toc-include" id="发布热更新"><span>发布热更新</span><a href="#发布热更新" class="rp-header-anchor rp-link" aria-hidden="true">#</a> </h1><div class="rp-not-doc rp-llms-container"><button class="rp-not-doc rp-llms-button rp-llms-copy-button"><div class="rp-llms-copy-button__icon-wrapper"><svg width="32" height="32" viewBox="0 0 30 30" class="rp-llms-copy-button__icon-success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-llms-copy-button__icon-copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></div><span>Copy Markdown</span></button><button class="rp-llms-button rp-llms-view-options__trigger "><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-llms-view-options__arrow "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button></div><!--$--><p>现在你的应用已经具备了检测更新的功能，下面我们来尝试发布并更新它。流程可参考下图：</p>
<div></div>
<p>流程总结如下：</p>
<ol>
<li>我们需要先打包一个原生 release 版本，在打包前请确保已集成了<code>react-native-update</code>并在调试过程中运行正常，安卓端<a href="/docs/getting-started.html#%E7%A6%81%E7%94%A8-android-%E7%9A%84-crunch-%E4%BC%98%E5%8C%96" class="rp-link">关闭了<code>crunchPngs</code>设置</a>，打包说明可参考<a href="https://reactnative.cn/docs/publishing-to-app-store" target="_blank" rel="noopener noreferrer" class="rp-link">iOS 打包</a>和<a href="https://reactnative.cn/docs/signed-apk-android" target="_blank" rel="noopener noreferrer" class="rp-link">android 打包</a>。打包完成后请使用<code>pushy uploadIpa</code>或者<code>pushy uploadApk</code>命令来把这个安装包上传到 pushy 服务器端，以作为之后热更差量对比的基准。同时请保留好这个安装包，上架和分发给用户所使用的安装包<code>需要和服务器端完全一致</code>。建议使用 git tag 功能来标记原生版本号（例如<code>v1.0.0</code>）。</li>
<li>然后在基准版本之上迭代业务逻辑（增删 js 代码，增删图片等静态资源），使用<code>pushy bundle</code>命令来生成和发布热更新版本，而不需要重新打包。建议使用 git tag 功能来标记热更版本号（例如<code>v1.0.1</code>）。</li>
<li>如果迭代过程中有原生方面的修改，则需要发布并上传新的原生基准版本（重复步骤 1，但需要设置不同的原生版本号）。可以只保留一个原生基准版本，也可以多版本同时维护。</li>
</ol>
<h2 class="rp-toc-include" id="发布原生基准版本"><a href="#发布原生基准版本" class="rp-header-anchor rp-link" aria-hidden="true">#</a>发布原生基准版本</h2>
<h3 class="rp-toc-include" id="ios"><a href="#ios" class="rp-header-anchor rp-link" aria-hidden="true">#</a>iOS</h3>
<p>首先参考<a href="https://reactnative.cn/docs/running-on-device" target="_blank" rel="noopener noreferrer" class="rp-link">文档-在设备上运行</a>，确定你正在使用离线包。然后点击菜单。</p>
<p>按照正常的发布流程打包<code>.ipa</code>文件：</p>
<ol>
<li>Xcode 中运行设备选真机或 Generic iOS Device</li>
<li>菜单中选择 Product - Archive</li>
<li>Archive 完成后选择<code>Export</code>生成.ipa 文件</li>
<li>然后运行如下命令上传到 pushy 服务器以供后续版本比对之用</li>
</ol>
<div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> uploadIpa</span><span style="color:var(--shiki-token-keyword)"> &lt;</span><span style="color:var(--shiki-token-string)">ipa后缀文</span><span style="color:var(--shiki-foreground)">件</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p>此 ipa 的<code>CFBundleShortVersionString</code>字段(位于<code>ios/项目名/Info.plist</code>中)会被记录为原生版本号<code>packageVersion</code>。</p>
<p>随后你可以选择往 AppStore 上传这个版本（可以重新 export 并调整相关选项，但请不要重新 archive），也可以先通过<a href="https://developer.apple.com/cn/testflight/" target="_blank" rel="noopener noreferrer" class="rp-link">Test flight</a>或<a href="https://www.pgyer.com/doc/view/build_ipa" target="_blank" rel="noopener noreferrer" class="rp-link">蒲公英</a>等渠道进行真机安装测试。请注意：暂不支持通过 Xcode 直接进行热更新测试。</p>
<p>如果后续需要再次 archive 打包（例如修改原生代码或配置。如果只是修改 js 代码则不需要重新打包。），请先<strong>更改版本号</strong>，并在打包完成后再次<code>uploadIpa</code>到服务器端记录，否则后续生成的相同版本的原生包会由于<a href="/docs/faq.html#%E7%83%AD%E6%9B%B4%E6%96%B0%E6%8A%A5%E9%94%99%EF%BC%9A%E7%83%AD%E6%9B%B4%E6%96%B0%E5%B7%B2%E6%9A%82%E5%81%9C%EF%BC%8C%E5%8E%9F%E5%9B%A0%EF%BC%9Abuildtime-mismatch%E3%80%82" class="rp-link">编译时间戳不一致而<code>无法获取热更新</code></a>。</p>
<h3 class="rp-toc-include" id="android"><a href="#android" class="rp-header-anchor rp-link" aria-hidden="true">#</a>Android</h3>
<p>首先参考<a href="https://reactnative.cn/docs/signed-apk-android" target="_blank" rel="noopener noreferrer" class="rp-link">文档-打包 APK</a>设置签名，然后在 android 文件夹下运行<code>./gradlew assembleRelease</code>或<code>./gradlew aR</code>，你就可以在<code>android/app/build/outputs/apk/release/app-release.apk</code>中找到你的应用包。</p>
<p>然后运行如下命令</p>
<div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> uploadApk</span><span style="color:var(--shiki-token-string)"> android/app/build/outputs/apk/release/app-release.apk</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># 如果你打的是 aab 格式的包，则请使用以下命令</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"># pushy uploadAab android/app/build/outputs/bundle/release/app-release.aab</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p>即可上传 apk 以供后续版本比对之用。此 apk 的<code>versionName</code>字段(位于<code>android/app/build.gradle</code>中)会被记录为原生版本号<code>packageVersion</code>。</p>
<p>随后你可以选择往应用市场发布这个版本，也可以先往设备上直接安装这个 apk 文件以进行测试。</p>
<p>如果后续需要再次打包（例如修改原生代码或配置。如果只是修改 js 代码则不需要重新打包。），请先<strong>更改版本号</strong>，并再次<code>uploadApk</code>到服务器端记录，否则后续生成的相同版本的原生包会由于<a href="/docs/faq.html#%E7%83%AD%E6%9B%B4%E6%96%B0%E6%8A%A5%E9%94%99%EF%BC%9A%E7%83%AD%E6%9B%B4%E6%96%B0%E5%B7%B2%E6%9A%82%E5%81%9C%EF%BC%8C%E5%8E%9F%E5%9B%A0%EF%BC%9Abuildtime-mismatch%E3%80%82" class="rp-link">编译时间戳不一致而<code>无法获取热更新</code></a>。</p>
<h3 class="rp-toc-include" id="harmony"><a href="#harmony" class="rp-header-anchor rp-link" aria-hidden="true">#</a>Harmony</h3>
<p>首先下载鸿蒙开发IDE DevEco-Studio，然后通过Build =&gt; Build Hap(s)/App(s) =&gt; Build App(s)，你就可以在<code>harmony/build/outputs/default/harmony-default-unsigned.app</code>中找到你的应用包。</p>
<p>然后运行如下命令</p>
<div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> uploadApp</span><span style="color:var(--shiki-token-string)"> harmony/build/outputs/default/harmony-default-unsigned.app</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p>即可上传 app 以供后续版本比对之用。此 app 的<code>versionName</code>字段(位于<code>harmony/AppScope/app.json5</code>中)会被记录为原生版本号<code>packageVersion</code>。</p>
<p>随后你可以选择往华为应用市场发布这个版本，也可以先往设备上通过命令<code>hdc shell</code>命令安装这个 app 文件以进行测试。</p>
<p>如果后续需要再次打包（例如修改原生代码或配置。如果只是修改 js 代码则不需要重新打包。），请先<strong>更改版本号</strong>，并再次<code>uploadApp</code>到服务器端记录，否则后续生成的相同版本的原生包会由于<a href="/docs/faq.html#%E7%83%AD%E6%9B%B4%E6%96%B0%E6%8A%A5%E9%94%99%EF%BC%9A%E7%83%AD%E6%9B%B4%E6%96%B0%E5%B7%B2%E6%9A%82%E5%81%9C%EF%BC%8C%E5%8E%9F%E5%9B%A0%EF%BC%9Abuildtime-mismatch%E3%80%82" class="rp-link">编译时间戳不一致而<code>无法获取热更新</code></a>。</p>
<h2 class="rp-toc-include" id="发布热更新版本"><a href="#发布热更新版本" class="rp-header-anchor rp-link" aria-hidden="true">#</a>发布热更新版本</h2>
<p>你可以尝试修改一行代码(譬如将版本一修改为版本二)，然后使用<code>pushy bundle --platform &lt;ios|android|harmony&gt;</code>命令来生成新的热更新版本。</p>
<div class="rp-callout rp-callout--info"><div class="rp-callout__title">Info</div><div class="rp-callout__content"><p>
如果你使用了较新版本的<code>expo</code>或其他没有<code>index.js</code>的框架，执行<code>bundle</code>命令时会报错。此时请手动创建一个<code>index.js</code>文件，在其中引用框架自身的入口文件即可。具体入口文件的路径如何，请参考框架的说明文档或者<code>package.json</code>中的<code>main</code>字段。例如针对<code>expo</code>的<code>index.js</code>可能是如下这样写：</p><div class="rp-codeblock language-js"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="js"><code><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-token-string-expression)"> &quot;expo-router/entry&quot;</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div></div></div>
<div class="rp-codeblock language-bash"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="bash"><code><span class="line"><span style="color:var(--shiki-token-function)">$</span><span style="color:var(--shiki-token-string)"> pushy</span><span style="color:var(--shiki-token-string)"> bundle</span><span style="color:var(--shiki-token-string)"> --platform</span><span style="color:var(--shiki-token-string)"> android</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">Bundling</span><span style="color:var(--shiki-token-string)"> with</span><span style="color:var(--shiki-token-string)"> React</span><span style="color:var(--shiki-token-string)"> Native</span><span style="color:var(--shiki-token-string)"> version:</span><span style="color:var(--shiki-token-constant)">  0.22.2</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">&lt;</span><span style="color:var(--shiki-foreground)">各种进度输出</span><span style="color:var(--shiki-token-keyword)">&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">Bundled</span><span style="color:var(--shiki-token-string)"> saved</span><span style="color:var(--shiki-token-string)"> to:</span><span style="color:var(--shiki-token-string)"> build/output/android.1459850548545.ppk</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">Would</span><span style="color:var(--shiki-token-string)"> you</span><span style="color:var(--shiki-token-string)"> like</span><span style="color:var(--shiki-token-string)"> to</span><span style="color:var(--shiki-token-string)"> publish</span><span style="color:var(--shiki-token-string)"> it?</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-function)">Y/N</span><span style="color:var(--shiki-foreground)">)</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p>如果想要立即上传，此时输入 Y。当然，你也可以在将来使用<code>pushy publish --platform android build/output/android.1459850548545.ppk</code>来上传刚才打包好的热更新包。</p>
<div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span>  Uploading [========================================================] 100% 0.0s</span></span>
<span class="line"><span>Enter version name: &lt;输入热更新版本名字，如1.0.0-rc&gt;</span></span>
<span class="line"><span>Enter description: &lt;输入热更新版本描述&gt;</span></span>
<span class="line"><span>Enter meta info: {&quot;ok&quot;:1}</span></span>
<span class="line"><span>Ok.</span></span>
<span class="line"><span>Would you like to bind packages to this version?(Y/N)</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p>此时版本已经提交到 pushy 服务，但用户暂时看不到此更新，你需要先将特定的原生包版本绑定到此热更新版本上。</p>
<p>此时输入 Y 立即绑定，你也可以在将来使用<code>pushy update --platform &lt;ios|android|harmony&gt;</code>来对已上传的热更包和原生包进行绑定。除此以外，你还可以在网页端操作，简单的将对应的原生包版本拖到需要的热更新版本下即可。</p>
<div class="rp-codeblock language-txt"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="txt"><code><span class="line"><span>┌────────────┬──────────────────────────────────────┐</span></span>
<span class="line"><span>│ Package Id │               Version                │</span></span>
<span class="line"><span>├────────────┼──────────────────────────────────────┤</span></span>
<span class="line"><span>│   46272    │ 2.0(normal)                          │</span></span>
<span class="line"><span>├────────────┼──────────────────────────────────────┤</span></span>
<span class="line"><span>│   45577    │ 1.0(normal)                          │</span></span>
<span class="line"><span>└────────────┴──────────────────────────────────────┘</span></span>
<span class="line"><span>共 2 个包</span></span>
<span class="line"><span>输入原生包 id: 46272</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p>版本绑定完毕后，服务器会在几秒内生成差量补丁，客户端就可以获取到更新了。</p>
<p>后续要继续发布新的热更新，只需反复执行<code>pushy bundle</code>命令即可，不需要重新打包。</p>
<p>恭喜你，至此为止，你已经完成了植入代码热更新的全部工作。</p>
<h2 class="rp-toc-include" id="灰度发布"><a href="#灰度发布" class="rp-header-anchor rp-link" aria-hidden="true">#</a>灰度发布</h2>
<p>灰度发布（又称金丝雀发布、渐进式发布）是一种降低热更新发布风险的策略，通过逐步扩大更新范围来验证新版本的稳定性。</p>
<h3 class="rp-toc-include" id="什么是灰度发布"><a href="#什么是灰度发布" class="rp-header-anchor rp-link" aria-hidden="true">#</a>什么是灰度发布</h3>
<p>灰度发布是指在正式全量发布热更新之前，先将更新推送给一小部分用户（如 5%、10%），观察这部分用户的使用情况后，再逐步扩大更新比例，直到最终推送给所有用户。</p>
<h3 class="rp-toc-include" id="灰度发布的作用"><a href="#灰度发布的作用" class="rp-header-anchor rp-link" aria-hidden="true">#</a>灰度发布的作用</h3>
<ul>
<li><strong>降低风险</strong>：如果新版本存在 bug，只会影响小部分用户，可以及时发现并回滚</li>
<li><strong>验证稳定性</strong>：通过小范围用户的真实使用反馈，验证新版本在各种设备和网络环境下的表现</li>
<li><strong>平滑过渡</strong>：避免突然的全量更新对服务器造成的压力峰值</li>
<li><strong>快速止损</strong>：一旦发现问题，可以立即停止灰度，将影响范围控制在最小</li>
</ul>
<h3 class="rp-toc-include" id="工作原理"><a href="#工作原理" class="rp-header-anchor rp-link" aria-hidden="true">#</a>工作原理</h3>
<p>当你设置了灰度比例（如 10%）后，检查更新时会根据每个用户的设备 UUID 进行哈希计算，确定该用户是否在灰度范围内：</p>
<ul>
<li>灰度范围内的用户会收到新版本的更新推送</li>
<li>灰度范围外的用户会收到上一个全量版本（如果有），或显示为已是最新</li>
<li>同一用户的灰度状态是稳定的，不会因为多次检查更新而变化</li>
</ul>
<h3 class="rp-toc-include" id="使用方法"><a href="#使用方法" class="rp-header-anchor rp-link" aria-hidden="true">#</a>使用方法</h3>
<h4 class="rp-toc-include" id="通过网页端操作"><a href="#通过网页端操作" class="rp-header-anchor rp-link" aria-hidden="true">#</a>通过网页端操作</h4>
<ol>
<li>登录 <a href="https://update.reactnative.cn" target="_blank" rel="noopener noreferrer" class="rp-link">Pushy 管理后台</a></li>
<li>选择对应的应用和原生包版本</li>
<li>点击&quot;发布&quot;按钮</li>
<li>选择灰度发布比例</li>
</ol>
<h4 class="rp-toc-include" id="通过命令行操作"><a href="#通过命令行操作" class="rp-header-anchor rp-link" aria-hidden="true">#</a>通过命令行操作</h4>
<p>请查看<a href="/docs/cli.html#pushy-update" class="rp-link">命令行工具文档中的 rollout 参数</a></p>
<h3 class="rp-toc-include" id="注意事项"><a href="#注意事项" class="rp-header-anchor rp-link" aria-hidden="true">#</a>注意事项</h3>
<div class="rp-callout rp-callout--warning"><div class="rp-callout__title">Warning</div><div class="rp-callout__content"><p>
<strong>重要提示</strong>：灰度版本与全量版本是独立的绑定关系。</p></div></div>
<ul>
<li><strong>同时只能有一个灰度版本</strong>：每个原生包版本只能绑定一个灰度热更版本（比例小于100%）和一个全量热更版本</li>
<li><strong>优先级</strong>：如果同时存在灰度版本和全量版本，灰度范围内命中的用户会收到灰度版本，没有命中的用户会收到全量版本</li>
<li><strong>提升为全量</strong>：将灰度比例设置为 100% 后，该版本会自动提升为全量版本，替换原有的全量版本</li>
<li><strong>客户端版本要求</strong>：<code>react-native-update</code> &gt;= 10.32.0 才能支持同时发布灰度和全量版本。</li>
</ul><!--/$--></div><footer class="rp-doc-footer"><div class="rp-doc-footer__edit"></div><div class="rp-doc-footer__divider"></div><div class="rp-prev-next-page"><a href="/docs/integration.html" class="rp-prev-next-page__item rp-prev-next-page__prev rp-link"><span class="rp-prev-next-page__item__desc">Previous page</span><span class="rp-prev-next-page__item__title"><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-prev-next-page__icon rp-prev-next-page__rotate_180"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg><span>代码集成</span></span></a><a href="/docs/api.html" class="rp-prev-next-page__item rp-prev-next-page__next rp-link"><span class="rp-prev-next-page__item__desc">Next page</span><span class="rp-prev-next-page__item__title"><span>API 文档</span><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-prev-next-page__icon"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></span></a></div></footer></main></div><aside class="rp-doc-layout__outline rp-scrollbar"><div class="rp-outline"><div class="rp-outline__title">ON THIS PAGE<svg width="14" height="14" class="rp-progress-circle"><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-divider-light)" stroke-width="2"></circle><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-brand)" stroke-width="2" stroke-dasharray="37.69911184307752" stroke-dashoffset="37.69911184307752" transform="rotate(-90 7 7)" style="transition:stroke-dashoffset 0.3s"></circle></svg></div><nav class="rp-outline__toc rp-scrollbar"><a href="#发布原生基准版本" class="rp-toc-item rp-link" title="发布原生基准版本" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">发布原生基准版本</span></a><a href="#ios" class="rp-toc-item rp-link" title="iOS" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">iOS</span></a><a href="#android" class="rp-toc-item rp-link" title="Android" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">Android</span></a><a href="#harmony" class="rp-toc-item rp-link" title="Harmony" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">Harmony</span></a><a href="#发布热更新版本" class="rp-toc-item rp-link" title="发布热更新版本" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">发布热更新版本</span></a><a href="#灰度发布" class="rp-toc-item rp-link" title="灰度发布" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">灰度发布</span></a><a href="#什么是灰度发布" class="rp-toc-item rp-link" title="什么是灰度发布" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">什么是灰度发布</span></a><a href="#灰度发布的作用" class="rp-toc-item rp-link" title="灰度发布的作用" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">灰度发布的作用</span></a><a href="#工作原理" class="rp-toc-item rp-link" title="工作原理" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">工作原理</span></a><a href="#使用方法" class="rp-toc-item rp-link" title="使用方法" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">使用方法</span></a><a href="#通过网页端操作" class="rp-toc-item rp-link" title="通过网页端操作" style="padding-left:24px" data-depth="2"><span class="rp-toc-item__text rp-doc">通过网页端操作</span></a><a href="#通过命令行操作" class="rp-toc-item rp-link" title="通过命令行操作" style="padding-left:24px" data-depth="2"><span class="rp-toc-item__text rp-doc">通过命令行操作</span></a><a href="#注意事项" class="rp-toc-item rp-link" title="注意事项" style="padding-left:12px" data-depth="1"><span class="rp-toc-item__text rp-doc">注意事项</span></a></nav><div class="rp-outline__divider"></div><div class="rp-outline__bottom"><button class="rp-outline__scroll-to-top"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.99967 14.6667C11.6816 14.6667 14.6663 11.6819 14.6663 8.00001C14.6663 4.31811 11.6816 1.33334 7.99967 1.33334C4.31777 1.33334 1.33301 4.31811 1.33301 8.00001C1.33301 11.6819 4.31777 14.6667 7.99967 14.6667Z" stroke="currentColor" stroke-opacity="0.8" stroke-width="1.33333"></path><path d="M7.99967 14.6667C11.6816 14.6667 14.6663 11.6819 14.6663 8.00001C14.6663 4.31811 11.6816 1.33334 7.99967 1.33334C4.31777 1.33334 1.33301 4.31811 1.33301 8.00001C1.33301 11.6819 4.31777 14.6667 7.99967 14.6667Z" stroke="currentColor" stroke-opacity="0.8" stroke-width="1.33333" stroke-linejoin="round"></path><path d="M11 9L8 6L5 9" stroke="currentColor" stroke-opacity="0.8" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>Back to top</span></button></div></div></aside></div></div>
    <div id="__rspress_modal_container"></div>
  </body>
</html>
